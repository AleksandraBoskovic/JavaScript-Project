<!DOCTYPE html> 
<html>
<head>
<style type="text/css">

div#puzzle_board{
background:rgb(46, 12, 12);
margin: black;
width: 800px;
height:400px;
margin: auto;
text-align:center;
}

div#puzzle_board > img{
width:200px;
height:200px;
float:left;
}

body {
    background: black;
    text-align: center;
    color: bisque;
}
</style>


<script>

var picture_array = ['1.jpg','2.jpg','3.jpg','4.jpg','5.jpg','6.jpg','7.jpg','8.jpg'];
var num_move = 0;
var picture_swap=[];
var picture_id=[];

Array.prototype.shuffle = function()
{
    var i=this.length , j, temp;
    while (--i > 0) {
        j= Math.floor(Math.random() * (i+1));
        temp= this[j];
        this[j] = this[i];
        this[i] = temp ;
    }
}


function swap(picture){
if (picture_swap.length < 2) {
    if (picture_swap.length == 0) {
        picture_swap.push(picture.src);
        picture_id.push(picture.id);
    } else {
        picture_swap.push(picture.src);
        picture_id.push(picture.id);
        document.getElementById(picture_id[0]).src = picture_swap[1] ; 
        document.getElementById(picture_id[1]).src = picture_swap[0] ; 
        num_move+=1;
        document.getElementById('moves_number').innerHTML = ""+num_move+"" ;
        picture_swap = [];
        picture_id = [];
       
        chack();    
          } 

    }
}


function chack(){  
    var end = true;

    for (let index = 0; index < picture_array.length; index++) {
        var pathArray = document.getElementById(index).src.split( '/' );
        if(pathArray[pathArray.length - 1] != (index+1)+'.jpg'){     
        end = false ;
       break; 
      }
    }

    if(end){

    var minutes;
    var seconds;

    if(m==1) {
        minutes=0;
        seconds=10-s;
    }
    else{
      if(s<=10)
      { minutes=1;
        seconds=10-s;

      }
      else{
        minutes=0;
        seconds=70-s;
      }

    }

      window.alert("SUCCESS\n You use "+ num_move+ " moves\n Complete for "+minutes+":"+seconds);
      newBoard();
      m=1;s=11;
    }

  
}  


function newBoard() {
    num_move = 0;
    document.getElementById("moves_number").innerHTML="";
    var output ="";
    picture_array.shuffle();
    for (var index = 0; index < picture_array.length; index++) {
       output += '<img id="'+index+'" onclick ="swap(this)" src="'+picture_array[index]+'"> ';
        
    }
    document.getElementById('puzzle_board').innerHTML=output;
   
}

</script>


</head>
<body>
    <div style="margin:auto;width:800px;height:400px;">
            <img src="full.jpg"  style="width:800px;height:400px;"> 
    </div>

    <div>
        <p >MOVES NUMBER :</p> 
        <p id="moves_number" style="height:16px"></p>
    </div>

    <div style="position: relative; left:600px ;bottom:40px ;height:20px;width:400px;"> 
        <h1 id="h1">01:10</h1> 
    

        <script>
                  var m = 1;
                  var s = 11;

                  startTime();

                function startTime() {
                  if((m==1 && s>0) || (m==0 && s>0))
                  s--;
                  else {
                  m=0;
                  s=59;
                  }
                  document.getElementById("h1").innerHTML ="0"+ m + ":" + ((s>9)? s : "0" + s);
                 
                 if(m!=0 || s!=0){
                  var t = setTimeout(function(){ startTime() }, 1000);}
                  else{
                  document.getElementById("h1").style = "color:red;";
                  
                  var wait = setTimeout(window.alert("Time is up\n Try again"),1000); 

                  location.reload();

                  }
                }
                
                </script>



    </div>




    <div id="puzzle_board">
    <script> newBoard(); </script>
    </div>

          
          


</body>
</html>